<html>
<head>
    <title>PMTiles MapLibre Example</title>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.css" crossorigin="anonymous">
    <script src="https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.js" crossorigin="anonymous"></script>
    <script src="./pmtiles/index.js"></script>
    <style>
        body {
            margin: 0;
        }
        #map {
            height:100%; width:100%;
        }
    </style>
</head>
<body>
<div id="map"></div>
<script type="text/javascript">
    let protocol = new pmtiles.Protocol();
    maplibregl.addProtocol("pmtiles",protocol.tile);
    const PMTILES_URL = "http://0.0.0.0:9000/comtiles/planet.pmtiles?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=OKLD0VI9B2G8SS3JR0TC%2F20221231%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20221231T182142Z&X-Amz-Expires=604800&X-Amz-Security-Token=eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3NLZXkiOiJPS0xEMFZJOUIyRzhTUzNKUjBUQyIsImV4cCI6MTY3MjUxNDQzNywicGFyZW50IjoibWluaW9hZG1pbiJ9.ylSKhKdLYMfq8CIZRTwMKu5_Ys1NQhzLcNwgmH41vzO4WrIxDvduOf74rGshwQXSYyyJAf3QY5Df-g8ujGhEnQ&X-Amz-SignedHeaders=host&versionId=null&X-Amz-Signature=ae467c0f45a8647ea827fc372c47880e7095dd65cf1b2180f45c052d37979ac8";
    const p = new pmtiles.PMTiles(PMTILES_URL);
    protocol.add(p);

    p.getHeader().then(h => {
        const map = new maplibregl.Map({
            container: 'map',
            zoom: 6,
            center: [11.596765649081279, 48.14664347623256],
            //zoom: 6,
            // center: [8.745481287236137, 50.118716189520626],
            style: "http://127.0.0.1:8080/pmtiles/style-planet.json"
        });
        map.showTileBoundaries = true;
    });
</script>
</body>
</html>